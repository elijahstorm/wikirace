import{s as ne,v as oe,c as re,e as S,t as V,a as F,b as P,d as E,f as j,g as G,r as O,h as B,u as he,n as x,p as A}from"./scheduler.DuvC89Cg.js";import{S as ie,i as se,d as k,o as J,v as ae,f as m,l as w,g as b,h as y,s as H,t as z,n as de,j as pe,b as L,c as _e,a as me,m as ge,e as ve,p as ee,u as ye,q as we}from"./index.Cr2bqvGs.js";import{g as D}from"./firestore.FzaPx3Js.js";import{I as ce}from"./BackButton.C6a5L8vp.js";const Ee=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,C="src/lib/Race/PlayerScoreViewer.svelte";function te(i,e,o){const n=i.slice();return n[3]=e[o],n}function Q(i){let e,o,n,c;o=new ce({props:{icon:i[3].type==="url"?"akar-icons:arrow-right":"bi:arrow-90deg-left"},$$inline:!0});const l={c:function(){e=S("div"),_e(o.$$.fragment),n=F(),this.h()},l:function(r){e=P(r,"DIV",{class:!0,style:!0});var t=E(e);me(o.$$.fragment,t),n=G(t),t.forEach(m),this.h()},h:function(){w(e,"class","counter svelte-esgach"),O(e,"background-color",i[1].route.includes(i[3].url)?"var(--secondary)":i[2][i[3].type]),O(e,"color","var(--bg)"),B(e,C,18,3,381)},m:function(r,t){b(r,e,t),ge(o,e,null),y(e,n),c=!0},p:function(r,t){const a={};t&1&&(a.icon=r[3].type==="url"?"akar-icons:arrow-right":"bi:arrow-90deg-left"),o.$set(a),(!c||t&3)&&O(e,"background-color",r[1].route.includes(r[3].url)?"var(--secondary)":r[2][r[3].type])},i:function(r){c||(z(o.$$.fragment,r),c=!0)},o:function(r){L(o.$$.fragment,r),c=!1},d:function(r){r&&m(e),ve(o)}};return k("SvelteRegisterBlock",{block:l,id:Q.name,type:"each",source:"(15:2) {#each player.progress.linkHistory as link}",ctx:i}),l}function U(i){let e,o,n=i[0].name+"",c,l,s,r,t,a=i[0].score+"",f,u,v=i[0].score!==1?"s":"",T,R,I=J(i[0].progress.linkHistory),h=[];for(let g=0;g<I.length;g+=1)h[g]=Q(te(i,I,g));const fe=g=>L(h[g],1,1,()=>{h[g]=null}),$={c:function(){e=S("div"),o=S("p"),c=V(n),l=F(),s=S("div");for(let _=0;_<h.length;_+=1)h[_].c();r=F(),t=S("div"),f=V(a),u=V(" win"),T=V(v),this.h()},l:function(_){e=P(_,"DIV",{class:!0});var d=E(e);o=P(d,"P",{class:!0,style:!0});var p=E(o);c=j(p,n),p.forEach(m),l=G(d),s=P(d,"DIV",{class:!0});var N=E(s);for(let K=0;K<h.length;K+=1)h[K].l(N);N.forEach(m),r=G(d),t=P(d,"DIV",{class:!0});var q=E(t);f=j(q,a),u=j(q," win"),T=j(q,v),q.forEach(m),d.forEach(m),this.h()},h:function(){w(o,"class","name svelte-esgach"),O(o,"color",i[0].color??"var(--text)"),B(o,C,13,1,221),w(s,"class","progress svelte-esgach"),B(s,C,16,1,309),w(t,"class","score svelte-esgach"),B(t,C,30,1,678),w(e,"class","player svelte-esgach"),B(e,C,12,0,199)},m:function(_,d){b(_,e,d),y(e,o),y(o,c),y(e,l),y(e,s);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(s,null);y(e,r),y(e,t),y(t,f),y(t,u),y(t,T),R=!0},p:function(_,[d]){if((!R||d&1)&&n!==(n=_[0].name+"")&&H(c,n),(!R||d&1)&&O(o,"color",_[0].color??"var(--text)"),d&7){I=J(_[0].progress.linkHistory);let p;for(p=0;p<I.length;p+=1){const N=te(_,I,p);h[p]?(h[p].p(N,d),z(h[p],1)):(h[p]=Q(N),h[p].c(),z(h[p],1),h[p].m(s,null))}for(de(),p=I.length;p<h.length;p+=1)fe(p);pe()}(!R||d&1)&&a!==(a=_[0].score+"")&&H(f,a),(!R||d&1)&&v!==(v=_[0].score!==1?"s":"")&&H(T,v)},i:function(_){if(!R){for(let d=0;d<I.length;d+=1)z(h[d]);R=!0}},o:function(_){h=h.filter(Boolean);for(let d=0;d<h.length;d+=1)L(h[d]);R=!1},d:function(_){_&&m(e),he(h,_)}};return k("SvelteRegisterBlock",{block:$,id:U.name,type:"component",source:"",ctx:i}),$}function be(i,e,o){let n;oe(D,"game"),re(i,D,a=>o(1,n=a));let{$$slots:c={},$$scope:l}=e;ae("PlayerScoreViewer",c,[]);let{player:s}=e;const r={url:"var(--primary)",back:"var(--error)"};i.$$.on_mount.push(function(){s===void 0&&!("player"in e||i.$$.bound[i.$$.props.player])&&console.warn("<PlayerScoreViewer> was created without expected prop 'player'")});const t=["player"];return Object.keys(e).forEach(a=>{!~t.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<PlayerScoreViewer> was created with unknown prop '${a}'`)}),i.$$set=a=>{"player"in a&&o(0,s=a.player)},i.$capture_state=()=>({game:D,Icon:ce,player:s,linkTypeColor:r,$game:n}),i.$inject_state=a=>{"player"in a&&o(0,s=a.player)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[s,n,r]}class je extends ie{constructor(e){super(e),se(this,e,be,U,ne,{player:0}),k("SvelteRegisterComponent",{component:this,tagName:"PlayerScoreViewer",options:e,id:U.name})}get player(){throw new Error("<PlayerScoreViewer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set player(e){throw new Error("<PlayerScoreViewer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Z="src/lib/Race/RouteViewer.svelte";function M(i,e,o){const n=i.slice();return n[2]=e[o],n[4]=o,n}function le(i){let e,o=i[2]+"",n;const c={c:function(){e=S("span"),n=V(o),this.h()},l:function(s){e=P(s,"SPAN",{class:!0});var r=E(e);n=j(r,o),r.forEach(m),this.h()},h:function(){w(e,"class","svelte-1bs3vry"),B(e,Z,14,3,265)},m:function(s,r){b(s,e,r),y(e,n)},p:function(s,r){r&1&&o!==(o=s[2]+"")&&H(n,o)},d:function(s){s&&m(e)}};return k("SvelteRegisterBlock",{block:c,id:le.name,type:"else",source:"(12:2) {:else}",ctx:i}),c}function ue(i){let e,o=i[2]+"",n,c;const l={c:function(){e=S("a"),n=V(o),this.h()},l:function(r){e=P(r,"A",{target:!0,href:!0,class:!0});var t=E(e);n=j(t,o),t.forEach(m),this.h()},h:function(){w(e,"target","_blank"),w(e,"href",c="https://en.wikipedia.org/wiki/"+i[2]),w(e,"class","svelte-1bs3vry"),B(e,Z,10,3,169)},m:function(r,t){b(r,e,t),y(e,n)},p:function(r,t){t&1&&o!==(o=r[2]+"")&&H(n,o),t&1&&c!==(c="https://en.wikipedia.org/wiki/"+r[2])&&w(e,"href",c)},d:function(r){r&&m(e)}};return k("SvelteRegisterBlock",{block:l,id:ue.name,type:"if",source:"(8:2) {#if $game.state === 'waiting'}",ctx:i}),l}function W(i){let e;const o={c:function(){e=V("→")},l:function(c){e=j(c,"→")},m:function(c,l){b(c,e,l)},d:function(c){c&&m(e)}};return k("SvelteRegisterBlock",{block:o,id:W.name,type:"if",source:"(15:2) {#if index !== route.length - 1}",ctx:i}),o}function X(i,e){let o,n,c;function l(f,u){return f[1].state==="waiting"?ue:le}let s=l(e),r=s(e),t=e[4]!==e[0].length-1&&W(e);const a={key:i,first:null,c:function(){o=A(),r.c(),n=F(),t&&t.c(),c=A(),this.h()},l:function(u){o=A(),r.l(u),n=G(u),t&&t.l(u),c=A(),this.h()},h:function(){this.first=o},m:function(u,v){b(u,o,v),r.m(u,v),b(u,n,v),t&&t.m(u,v),b(u,c,v)},p:function(u,v){e=u,s===(s=l(e))&&r?r.p(e,v):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n))),e[4]!==e[0].length-1?t||(t=W(e),t.c(),t.m(c.parentNode,c)):t&&(t.d(1),t=null)},d:function(u){u&&(m(o),m(n),m(c)),r.d(u),t&&t.d(u)}};return k("SvelteRegisterBlock",{block:a,id:X.name,type:"each",source:"(7:1) {#each route as link, index (link)}",ctx:e}),a}function Y(i){let e,o,n=[],c=new Map,l=J(i[0]);const s=t=>t[2];ee(i,l,M,s);for(let t=0;t<l.length;t+=1){let a=M(i,l,t),f=s(a);c.set(f,n[t]=X(f,a))}const r={c:function(){e=S("p"),o=V(`Route:
	`);for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l:function(a){e=P(a,"P",{class:!0});var f=E(e);o=j(f,`Route:
	`);for(let u=0;u<n.length;u+=1)n[u].l(f);f.forEach(m),this.h()},h:function(){w(e,"class","svelte-1bs3vry"),B(e,Z,6,0,83)},m:function(a,f){b(a,e,f),y(e,o);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null)},p:function(a,[f]){f&3&&(l=J(a[0]),ee(a,l,M,s),n=ye(n,f,s,1,a,l,c,e,we,X,null,M))},i:x,o:x,d:function(a){a&&m(e);for(let f=0;f<n.length;f+=1)n[f].d()}};return k("SvelteRegisterBlock",{block:r,id:Y.name,type:"component",source:"",ctx:i}),r}function ke(i,e,o){let n;oe(D,"game"),re(i,D,t=>o(1,n=t));let{$$slots:c={},$$scope:l}=e;ae("RouteViewer",c,[]);let{route:s}=e;i.$$.on_mount.push(function(){s===void 0&&!("route"in e||i.$$.bound[i.$$.props.route])&&console.warn("<RouteViewer> was created without expected prop 'route'")});const r=["route"];return Object.keys(e).forEach(t=>{!~r.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&console.warn(`<RouteViewer> was created with unknown prop '${t}'`)}),i.$$set=t=>{"route"in t&&o(0,s=t.route)},i.$capture_state=()=>({game:D,route:s,$game:n}),i.$inject_state=t=>{"route"in t&&o(0,s=t.route)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[s,n]}class Be extends ie{constructor(e){super(e),se(this,e,ke,Y,ne,{route:0}),k("SvelteRegisterComponent",{component:this,tagName:"RouteViewer",options:e,id:Y.name})}get route(){throw new Error("<RouteViewer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set route(e){throw new Error("<RouteViewer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{je as P,Be as R,Ee as g};
