import{S as ne,i as oe,s as re,d as V,a2 as H,a0 as ie,a1 as se,v as ae,n as P,x as S,c as U,p as E,q as j,y as B,l as m,f as Y,r as g,u as C,w as X,g as b,X as w,z as F,k as O,h as _e,j as he,t as z,as as de,A as pe,B as me,C as ve,D as ye,a3 as x,a4 as we,au as ge,T as ee,e as T}from"./singletons-f35c50ab.js";import{g as A}from"./firestore-90890b0b.js";import{I as ce}from"./BackButton-3ecd4acf.js";const I="src/lib/Race/PlayerScoreViewer.svelte";function te(i,e,o){const n=i.slice();return n[3]=e[o],n}function M(i){let e,o,n,c;o=new ce({props:{icon:i[3].type==="url"?"akar-icons:arrow-right":"bi:arrow-90deg-left"},$$inline:!0});const l={c:function(){e=P("div"),pe(o.$$.fragment),n=U(),this.h()},l:function(r){e=E(r,"DIV",{class:!0,style:!0});var t=j(e);me(o.$$.fragment,t),n=Y(t),t.forEach(m),this.h()},h:function(){g(e,"class","counter s-mFV9_PLb_eXZ"),C(e,"background-color",i[1].route.includes(i[3].url)?"var(--secondary)":i[2][i[3].type]),C(e,"color","var(--bg)"),X(e,I,15,3,381)},m:function(r,t){b(r,e,t),ve(o,e,null),w(e,n),c=!0},p:function(r,t){const a={};t&1&&(a.icon=r[3].type==="url"?"akar-icons:arrow-right":"bi:arrow-90deg-left"),o.$set(a),(!c||t&3)&&C(e,"background-color",r[1].route.includes(r[3].url)?"var(--secondary)":r[2][r[3].type])},i:function(r){c||(O(o.$$.fragment,r),c=!0)},o:function(r){z(o.$$.fragment,r),c=!1},d:function(r){r&&m(e),ye(o)}};return V("SvelteRegisterBlock",{block:l,id:M.name,type:"each",source:"(15:2) {#each player.progress.linkHistory as link}",ctx:i}),l}function G(i){let e,o,n=i[0].name+"",c,l,s,r,t,a=i[0].score+"",f,u,y=i[0].score!==1?"s":"",L,R,k=i[0].progress.linkHistory;H(k);let _=[];for(let v=0;v<k.length;v+=1)_[v]=M(te(i,k,v));const fe=v=>z(_[v],1,1,()=>{_[v]=null}),$={c:function(){e=P("div"),o=P("p"),c=S(n),l=U(),s=P("div");for(let p=0;p<_.length;p+=1)_[p].c();r=U(),t=P("div"),f=S(a),u=S(" win"),L=S(y),this.h()},l:function(p){e=E(p,"DIV",{class:!0});var h=j(e);o=E(h,"P",{class:!0,style:!0});var d=j(o);c=B(d,n),d.forEach(m),l=Y(h),s=E(h,"DIV",{class:!0});var D=j(s);for(let q=0;q<_.length;q+=1)_[q].l(D);D.forEach(m),r=Y(h),t=E(h,"DIV",{class:!0});var N=j(t);f=B(N,a),u=B(N," win"),L=B(N,y),N.forEach(m),h.forEach(m),this.h()},h:function(){g(o,"class","name s-mFV9_PLb_eXZ"),C(o,"color",i[0].color??"var(--text)"),X(o,I,10,1,221),g(s,"class","progress s-mFV9_PLb_eXZ"),X(s,I,13,1,309),g(t,"class","score s-mFV9_PLb_eXZ"),X(t,I,27,1,678),g(e,"class","player s-mFV9_PLb_eXZ"),X(e,I,9,0,199)},m:function(p,h){b(p,e,h),w(e,o),w(o,c),w(e,l),w(e,s);for(let d=0;d<_.length;d+=1)_[d].m(s,null);w(e,r),w(e,t),w(t,f),w(t,u),w(t,L),R=!0},p:function(p,[h]){if((!R||h&1)&&n!==(n=p[0].name+"")&&F(c,n),(!R||h&1)&&C(o,"color",p[0].color??"var(--text)"),h&7){k=p[0].progress.linkHistory,H(k);let d;for(d=0;d<k.length;d+=1){const D=te(p,k,d);_[d]?(_[d].p(D,h),O(_[d],1)):(_[d]=M(D),_[d].c(),O(_[d],1),_[d].m(s,null))}for(_e(),d=k.length;d<_.length;d+=1)fe(d);he()}(!R||h&1)&&a!==(a=p[0].score+"")&&F(f,a),(!R||h&1)&&y!==(y=p[0].score!==1?"s":"")&&F(L,y)},i:function(p){if(!R){for(let h=0;h<k.length;h+=1)O(_[h]);R=!0}},o:function(p){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)z(_[h]);R=!1},d:function(p){p&&m(e),de(_,p)}};return V("SvelteRegisterBlock",{block:$,id:G.name,type:"component",source:"",ctx:i}),$}function ke(i,e,o){let n;ie(A,"game"),se(i,A,a=>o(1,n=a));let{$$slots:c={},$$scope:l}=e;ae("PlayerScoreViewer",c,[]);let{player:s}=e;const r={url:"var(--primary)",back:"var(--error)"};i.$$.on_mount.push(function(){s===void 0&&!("player"in e||i.$$.bound[i.$$.props.player])&&console.warn("<PlayerScoreViewer> was created without expected prop 'player'")});const t=["player"];return Object.keys(e).forEach(a=>{!~t.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<PlayerScoreViewer> was created with unknown prop '${a}'`)}),i.$$set=a=>{"player"in a&&o(0,s=a.player)},i.$capture_state=()=>({game:A,Icon:ce,player:s,linkTypeColor:r,$game:n}),i.$inject_state=a=>{"player"in a&&o(0,s=a.player)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[s,n,r]}class Se extends ne{constructor(e){super(e),oe(this,e,ke,G,re,{player:0}),V("SvelteRegisterComponent",{component:this,tagName:"PlayerScoreViewer",options:e,id:G.name})}get player(){throw new Error("<PlayerScoreViewer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set player(e){throw new Error("<PlayerScoreViewer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const W="src/lib/Race/RouteViewer.svelte";function Z(i,e,o){const n=i.slice();return n[2]=e[o],n[4]=o,n}function le(i){let e,o=i[2]+"",n;const c={c:function(){e=P("span"),n=S(o),this.h()},l:function(s){e=E(s,"SPAN",{class:!0});var r=j(e);n=B(r,o),r.forEach(m),this.h()},h:function(){g(e,"class","s-wXYAvTpxwU24"),X(e,W,12,3,265)},m:function(s,r){b(s,e,r),w(e,n)},p:function(s,r){r&1&&o!==(o=s[2]+"")&&F(n,o)},d:function(s){s&&m(e)}};return V("SvelteRegisterBlock",{block:c,id:le.name,type:"else",source:"(12:2) {:else}",ctx:i}),c}function ue(i){let e,o=i[2]+"",n,c;const l={c:function(){e=P("a"),n=S(o),this.h()},l:function(r){e=E(r,"A",{target:!0,href:!0,class:!0});var t=j(e);n=B(t,o),t.forEach(m),this.h()},h:function(){g(e,"target","_blank"),g(e,"href",c="https://en.wikipedia.org/wiki/"+i[2]),g(e,"class","s-wXYAvTpxwU24"),X(e,W,8,3,169)},m:function(r,t){b(r,e,t),w(e,n)},p:function(r,t){t&1&&o!==(o=r[2]+"")&&F(n,o),t&1&&c!==(c="https://en.wikipedia.org/wiki/"+r[2])&&g(e,"href",c)},d:function(r){r&&m(e)}};return V("SvelteRegisterBlock",{block:l,id:ue.name,type:"if",source:"(8:2) {#if $game.state === 'waiting'}",ctx:i}),l}function J(i){let e;const o={c:function(){e=S("→")},l:function(c){e=B(c,"→")},m:function(c,l){b(c,e,l)},d:function(c){c&&m(e)}};return V("SvelteRegisterBlock",{block:o,id:J.name,type:"if",source:"(15:2) {#if index !== route.length - 1}",ctx:i}),o}function K(i,e){let o,n,c;function l(f,u){return f[1].state==="waiting"?ue:le}let s=l(e),r=s(e),t=e[4]!==e[0].length-1&&J(e);const a={key:i,first:null,c:function(){o=T(),r.c(),n=U(),t&&t.c(),c=T(),this.h()},l:function(u){o=T(),r.l(u),n=Y(u),t&&t.l(u),c=T(),this.h()},h:function(){this.first=o},m:function(u,y){b(u,o,y),r.m(u,y),b(u,n,y),t&&t.m(u,y),b(u,c,y)},p:function(u,y){e=u,s===(s=l(e))&&r?r.p(e,y):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n))),e[4]!==e[0].length-1?t||(t=J(e),t.c(),t.m(c.parentNode,c)):t&&(t.d(1),t=null)},d:function(u){u&&m(o),r.d(u),u&&m(n),t&&t.d(u),u&&m(c)}};return V("SvelteRegisterBlock",{block:a,id:K.name,type:"each",source:"(7:1) {#each route as link, index (link)}",ctx:e}),a}function Q(i){let e,o,n=[],c=new Map,l=i[0];H(l);const s=t=>t[2];x(i,l,Z,s);for(let t=0;t<l.length;t+=1){let a=Z(i,l,t),f=s(a);c.set(f,n[t]=K(f,a))}const r={c:function(){e=P("p"),o=S(`Route:
	`);for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l:function(a){e=E(a,"P",{class:!0});var f=j(e);o=B(f,`Route:
	`);for(let u=0;u<n.length;u+=1)n[u].l(f);f.forEach(m),this.h()},h:function(){g(e,"class","s-wXYAvTpxwU24"),X(e,W,4,0,83)},m:function(a,f){b(a,e,f),w(e,o);for(let u=0;u<n.length;u+=1)n[u].m(e,null)},p:function(a,[f]){f&3&&(l=a[0],H(l),x(a,l,Z,s),n=we(n,f,s,1,a,l,c,e,ge,K,null,Z))},i:ee,o:ee,d:function(a){a&&m(e);for(let f=0;f<n.length;f+=1)n[f].d()}};return V("SvelteRegisterBlock",{block:r,id:Q.name,type:"component",source:"",ctx:i}),r}function be(i,e,o){let n;ie(A,"game"),se(i,A,t=>o(1,n=t));let{$$slots:c={},$$scope:l}=e;ae("RouteViewer",c,[]);let{route:s}=e;i.$$.on_mount.push(function(){s===void 0&&!("route"in e||i.$$.bound[i.$$.props.route])&&console.warn("<RouteViewer> was created without expected prop 'route'")});const r=["route"];return Object.keys(e).forEach(t=>{!~r.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&console.warn(`<RouteViewer> was created with unknown prop '${t}'`)}),i.$$set=t=>{"route"in t&&o(0,s=t.route)},i.$capture_state=()=>({game:A,route:s,$game:n}),i.$inject_state=t=>{"route"in t&&o(0,s=t.route)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[s,n]}class Ee extends ne{constructor(e){super(e),oe(this,e,be,Q,re,{route:0}),V("SvelteRegisterComponent",{component:this,tagName:"RouteViewer",options:e,id:Q.name})}get route(){throw new Error("<RouteViewer>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set route(e){throw new Error("<RouteViewer>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}export{Se as P,Ee as R};
