import{s as pe,v as ie,c as se,k as Ie,e as k,H as lt,b as y,d as O,D as ct,h as S,n as de,q as ut,G as ft,I as mt,J as ht,K as dt,t as D,a as H,f as M,g as C,F as ye,r as ge,a9 as K,P as gt,o as Be,a7 as Le,u as _t}from"../chunks/scheduler.DuvC89Cg.js";import{S as ve,i as we,d as V,v as be,f as b,l as P,g as ce,t as W,b as x,o as _e,p as Te,h,r as Se,s as F,u as pt,q as vt,c as Ne,a as Re,m as He,j as Ue,e as Ce,n as Ke}from"../chunks/index.Cr2bqvGs.js";import{b as $,g as Ve}from"../chunks/entry.Crc3OFkF.js";import{O as wt,c as le,_ as bt,m as re,g as J,p as ze,l as ke}from"../chunks/firestore.FzaPx3Js.js";import{n as Ae}from"../chunks/navigation.i04V3j_9.js";import{b as kt}from"../chunks/index.Bt-Xh7oU.js";function yt(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in t)){const l=Object.getOwnPropertyDescriptor(o,r);l&&Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var q={},Qe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=t.MonoidProduct=t.MonoidSum=t.SemigroupProduct=t.SemigroupSum=t.MagmaSub=t.Show=t.Bounded=t.Ord=t.Eq=t.isNumber=void 0;var e=function(n){return typeof n=="number"};t.isNumber=e,t.Eq={equals:function(n,o){return n===o}},t.Ord={equals:t.Eq.equals,compare:function(n,o){return n<o?-1:n>o?1:0}},t.Bounded={equals:t.Eq.equals,compare:t.Ord.compare,top:1/0,bottom:-1/0},t.Show={show:function(n){return JSON.stringify(n)}},t.MagmaSub={concat:function(n,o){return n-o}},t.SemigroupSum={concat:function(n,o){return n+o}},t.SemigroupProduct={concat:function(n,o){return n*o}},t.MonoidSum={concat:t.SemigroupSum.concat,empty:0},t.MonoidProduct={concat:t.SemigroupProduct.concat,empty:1},t.Field={add:t.SemigroupSum.concat,zero:0,mul:t.SemigroupProduct.concat,one:1,sub:t.MagmaSub.concat,degree:function(n){return 1},div:function(n,o){return n/o},mod:function(n,o){return n%o}}})(Qe);var St=le&&le.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),Pt=le&&le.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xe=le&&le.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&St(e,t,n);return Pt(e,t),e};Object.defineProperty(q,"__esModule",{value:!0});var Ze=q.now=ot=q.create=nt=q.Ord=tt=q.eqYear=et=q.eqMonth=xe=q.eqDate=$e=q.Eq=void 0,Ot=bt,Et=Xe(Qe),qt=Xe(wt),$e=q.Eq={equals:function(t,e){return t.valueOf()===e.valueOf()}},xe=q.eqDate={equals:function(t,e){return t.getDate()===e.getDate()}},et=q.eqMonth={equals:function(t,e){return t.getMonth()===e.getMonth()}},tt=q.eqYear={equals:function(t,e){return t.getFullYear()===e.getFullYear()}},nt=q.Ord=(0,Ot.pipe)(Et.Ord,qt.contramap(function(t){return t.valueOf()})),jt=function(){return new Date},ot=q.create=jt,Dt=function(){return new Date().getTime()};Ze=q.now=Dt;const Mt=yt({__proto__:null,get Eq(){return $e},get Ord(){return nt},get create(){return ot},default:q,get eqDate(){return xe},get eqMonth(){return et},get eqYear(){return tt},get now(){return Ze}},[q]),Nt="src/lib/Race/LinkParser.svelte";function Pe(t){let e,n;const o={c:function(){e=k("div"),n=new lt(!1),this.h()},l:function(l){e=y(l,"DIV",{class:!0});var a=O(e);n=ct(a,!1),a.forEach(b),this.h()},h:function(){n.a=null,P(e,"class","container"),S(e,Nt,26,0,559)},m:function(l,a){ce(l,e,a),n.m(t[0],e),t[2](e)},p:function(l,[a]){a&1&&n.p(l[0])},i:de,o:de,d:function(l){l&&b(e),t[2](null)}};return V("SvelteRegisterBlock",{block:o,id:Pe.name,type:"component",source:"",ctx:t}),o}function Rt(t,e,n){let o,r;ie(re,"me"),se(t,re,s=>n(3,o=s)),ie(J,"game"),se(t,J,s=>n(4,r=s));let{$$slots:l={},$$scope:a}=e;be("LinkParser",l,[]);let{html:i}=e,m;Ie(()=>m.querySelectorAll(`a[href*="${$}"]`).forEach(s=>s.onclick=f));const f=s=>{var N;s.preventDefault(),s.stopPropagation();const v=(N=s.target)==null?void 0:N.href,p=v.substring(v.indexOf($)+$.length+1);Ae(r,o,p)};t.$$.on_mount.push(function(){i===void 0&&!("html"in e||t.$$.bound[t.$$.props.html])&&console.warn("<LinkParser> was created without expected prop 'html'")});const u=["html"];Object.keys(e).forEach(s=>{!~u.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<LinkParser> was created with unknown prop '${s}'`)});function d(s){ut[s?"unshift":"push"](()=>{m=s,n(1,m)})}return t.$$set=s=>{"html"in s&&n(0,i=s.html)},t.$capture_state=()=>({base:$,game:J,me:re,afterUpdate:Ie,navigate:Ae,html:i,container:m,wikilink:f,$me:o,$game:r}),t.$inject_state=s=>{"html"in s&&n(0,i=s.html),"container"in s&&n(1,m=s.container)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[i,m,d]}class rt extends ve{constructor(e){super(e),we(this,e,Rt,Pe,pe,{html:0}),V("SvelteRegisterComponent",{component:this,tagName:"LinkParser",options:e,id:Pe.name})}get html(){throw new Error("<LinkParser>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set html(e){throw new Error("<LinkParser>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Ht=t=>({html:t&1,title:t&2}),Ge=t=>({html:t[0],title:t[1]});function Oe(t){let e;const n=t[4].default,o=ft(n,t,t[3],Ge),r={c:function(){o&&o.c()},l:function(a){o&&o.l(a)},m:function(a,i){o&&o.m(a,i),e=!0},p:function(a,[i]){o&&o.p&&(!e||i&11)&&mt(o,n,a,a[3],e?dt(n,a[3],i,Ht):ht(a[3]),Ge)},i:function(a){e||(W(o,a),e=!0)},o:function(a){x(o,a),e=!1},d:function(a){o&&o.d(a)}};return V("SvelteRegisterBlock",{block:r,id:Oe.name,type:"component",source:"",ctx:t}),r}const Ye="https://en.wikipedia.org/w/api.php?origin=*&action=parse&format=json&page=",We="Error",Fe="Error, no wikipedia page found";function Ct(t,e,n){let{$$slots:o={},$$scope:r}=e;be("GameShowWikiPage",o,["default"]);let{wiki:l=""}=e,a="잠시만요~",i="Loading...";const m=["wiki"];return Object.keys(e).forEach(f=>{!~m.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<GameShowWikiPage> was created with unknown prop '${f}'`)}),t.$$set=f=>{"wiki"in f&&n(2,l=f.wiki),"$$scope"in f&&n(3,r=f.$$scope)},t.$capture_state=()=>({pipe:ze,base:$,wikipedia:Ye,errorTitle:We,errorHTML:Fe,wiki:l,html:a,title:i}),t.$inject_state=f=>{"wiki"in f&&n(2,l=f.wiki),"html"in f&&n(0,a=f.html),"title"in f&&n(1,i=f.title)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&4&&fetch(`${Ye}${l??"Main_page"}`).then(f=>f.json()).then(f=>{var d,s;let u=(d=ze(f,JSON.stringify,JSON.parse))==null?void 0:d.parse;n(1,i=(u==null?void 0:u.title)??We),n(0,a=((s=u==null?void 0:u.text["*"])==null?void 0:s.replaceAll("/wiki/",`${$}/`))??Fe)})},[a,i,l,r,o]}class at extends ve{constructor(e){super(e),we(this,e,Ct,Oe,pe,{wiki:2}),V("SvelteRegisterComponent",{component:this,tagName:"GameShowWikiPage",options:e,id:Oe.name})}get wiki(){throw new Error("<GameShowWikiPage>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set wiki(e){throw new Error("<GameShowWikiPage>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Y="src/lib/Race/ScoreResults.svelte";function he(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function Ee(t,e){let n,o=e[6]+"",r,l,a,i,m=e[4].url+"",f,u;const d={key:t,first:null,c:function(){n=k("div"),r=D(o),l=D(`:
				`),a=k("span"),i=D("/"),f=D(m),u=H(),this.h()},l:function(v){n=y(v,"DIV",{});var p=O(n);r=M(p,o),l=M(p,`:
				`),a=y(p,"SPAN",{class:!0});var N=O(a);i=M(N,"/"),f=M(N,m),N.forEach(b),u=C(p),p.forEach(b),this.h()},h:function(){P(a,"class","svelte-163izi3"),K(a,"link",!0),K(a,"back",e[4].type==="back"),K(a,"destination",e[2].route.includes(e[4].url)),S(a,Y,24,4,520),S(n,Y,22,3,497),this.first=n},m:function(v,p){ce(v,n,p),h(n,r),h(n,l),h(n,a),h(a,i),h(a,f),h(n,u)},p:function(v,p){e=v,p&1&&o!==(o=e[6]+"")&&F(r,o),p&1&&m!==(m=e[4].url+"")&&F(f,m),p&1&&K(a,"back",e[4].type==="back"),p&5&&K(a,"destination",e[2].route.includes(e[4].url))},d:function(v){v&&b(n)}};return V("SvelteRegisterBlock",{block:d,id:Ee.name,type:"each",source:"(18:2) {#each player.progress.linkHistory as link, index (link)}",ctx:e}),d}function qe(t){let e,n,o=t[0].name+"",r,l,a,i=t[1]?"Hide":"View History",m,f,u,d=[],s=new Map,v,p,N="Links Clicked",ee,z,G=t[0].progress.linksProgressed+"",Q,I,B,L="Times Pressed Back",ae,j,U=t[0].progress.backNavs+"",te,A,w,X=_e(t[0].progress.linkHistory);const ne=_=>_[4];Te(t,X,he,ne);for(let _=0;_<X.length;_+=1){let g=he(t,X,_),c=ne(g);s.set(c,d[_]=Ee(c,g))}const E={c:function(){e=k("section"),n=k("p"),r=D(o),l=H(),a=k("button"),m=D(i),f=H(),u=k("div");for(let g=0;g<d.length;g+=1)d[g].c();v=H(),p=k("div"),p.textContent=N,ee=H(),z=k("div"),Q=D(G),I=H(),B=k("div"),B.textContent=L,ae=H(),j=k("div"),te=D(U),this.h()},l:function(g){e=y(g,"SECTION",{class:!0});var c=O(e);n=y(c,"P",{class:!0,style:!0});var R=O(n);r=M(R,o),R.forEach(b),l=C(c),a=y(c,"BUTTON",{class:!0});var Z=O(a);m=M(Z,i),Z.forEach(b),f=C(c),u=y(c,"DIV",{class:!0});var ue=O(u);for(let oe=0;oe<d.length;oe+=1)d[oe].l(ue);ue.forEach(b),v=C(c),p=y(c,"DIV",{class:!0,"data-svelte-h":!0}),ye(p)!=="svelte-1qx37wh"&&(p.textContent=N),ee=C(c),z=y(c,"DIV",{class:!0});var fe=O(z);Q=M(fe,G),fe.forEach(b),I=C(c),B=y(c,"DIV",{class:!0,"data-svelte-h":!0}),ye(B)!=="svelte-q5e352"&&(B.textContent=L),ae=C(c),j=y(c,"DIV",{class:!0});var me=O(j);te=M(me,U),me.forEach(b),c.forEach(b),this.h()},h:function(){P(n,"class","name svelte-163izi3"),ge(n,"color",t[0].color??"var(--text)"),S(n,Y,14,1,194),P(a,"class","button"),S(a,Y,17,1,282),P(u,"class","history svelte-163izi3"),K(u,"show",t[1]),S(u,Y,20,1,401),P(p,"class","stat-name svelte-163izi3"),S(p,Y,34,1,708),P(z,"class","stat svelte-163izi3"),S(z,Y,35,1,752),P(B,"class","stat-name svelte-163izi3"),S(B,Y,38,1,816),P(j,"class","stat svelte-163izi3"),S(j,Y,39,1,865),P(e,"class","svelte-163izi3"),S(e,Y,13,0,183)},m:function(g,c){ce(g,e,c),h(e,n),h(n,r),h(e,l),h(e,a),h(a,m),h(e,f),h(e,u);for(let R=0;R<d.length;R+=1)d[R]&&d[R].m(u,null);h(e,v),h(e,p),h(e,ee),h(e,z),h(z,Q),h(e,I),h(e,B),h(e,ae),h(e,j),h(j,te),A||(w=[Se(a,"click",t[3],!1,!1,!1,!1),Se(a,"keydown",t[3],!1,!1,!1,!1)],A=!0)},p:function(g,[c]){c&1&&o!==(o=g[0].name+"")&&F(r,o),c&1&&ge(n,"color",g[0].color??"var(--text)"),c&2&&i!==(i=g[1]?"Hide":"View History")&&F(m,i),c&5&&(X=_e(g[0].progress.linkHistory),Te(g,X,he,ne),d=pt(d,c,ne,1,g,X,s,u,vt,Ee,null,he)),c&2&&K(u,"show",g[1]),c&1&&G!==(G=g[0].progress.linksProgressed+"")&&F(Q,G),c&1&&U!==(U=g[0].progress.backNavs+"")&&F(te,U)},i:de,o:de,d:function(g){g&&b(e);for(let c=0;c<d.length;c+=1)d[c].d();A=!1,gt(w)}};return V("SvelteRegisterBlock",{block:E,id:qe.name,type:"component",source:"",ctx:t}),E}function It(t,e,n){let o;ie(J,"game"),se(t,J,u=>n(2,o=u));let{$$slots:r={},$$scope:l}=e;be("ScoreResults",r,[]);let{player:a}=e,i=!1;const m=()=>{n(1,i=!i)};t.$$.on_mount.push(function(){a===void 0&&!("player"in e||t.$$.bound[t.$$.props.player])&&console.warn("<ScoreResults> was created without expected prop 'player'")});const f=["player"];return Object.keys(e).forEach(u=>{!~f.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<ScoreResults> was created with unknown prop '${u}'`)}),t.$$set=u=>{"player"in u&&n(0,a=u.player)},t.$capture_state=()=>({D:Mt,game:J,player:a,show:i,viewHistory:m,$game:o}),t.$inject_state=u=>{"player"in u&&n(0,a=u.player),"show"in u&&n(1,i=u.show)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[a,i,o,m]}class it extends ve{constructor(e){super(e),we(this,e,It,qe,pe,{player:0}),V("SvelteRegisterComponent",{component:this,tagName:"ScoreResults",options:e,id:qe.name})}get player(){throw new Error("<ScoreResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set player(e){throw new Error("<ScoreResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const T="src/routes/play/+page.svelte";function Je(t,e,n){const o=t.slice();return o[8]=e[n],o}function je(t){let e,n,o,r,l=t[2]?"Won! 🎉":"Lost",a,i,m,f,u=(t[2]?"You":t[3].who)+"",d,s,v,p=t[0].route[t[0].route.length-1].replaceAll("_"," ")+"",N,ee,z,G,Q,I,B,L,ae="Go home",j,U,te,A=_e(t[0].players),w=[];for(let E=0;E<A.length;E+=1)w[E]=De(Je(t,A,E));const X=E=>x(w[E],1,1,()=>{w[E]=null}),ne={c:function(){e=k("div"),n=k("div"),o=k("p"),r=D("You "),a=D(l),i=H(),m=k("p"),f=k("span"),d=D(u),s=D(`
				got to
				`),v=k("span"),N=D(p),ee=D(`
				first!`),z=H(),G=k("hr"),Q=H(),I=k("div");for(let _=0;_<w.length;_+=1)w[_].c();B=H(),L=k("button"),L.textContent=ae,this.h()},l:function(_){e=y(_,"DIV",{class:!0});var g=O(e);n=y(g,"DIV",{class:!0});var c=O(n);o=y(c,"P",{});var R=O(o);r=M(R,"You "),a=M(R,l),R.forEach(b),i=C(c),m=y(c,"P",{});var Z=O(m);f=y(Z,"SPAN",{style:!0});var ue=O(f);d=M(ue,u),ue.forEach(b),s=M(Z,`
				got to
				`),v=y(Z,"SPAN",{class:!0});var fe=O(v);N=M(fe,p),fe.forEach(b),ee=M(Z,`
				first!`),Z.forEach(b),z=C(c),G=y(c,"HR",{}),Q=C(c),I=y(c,"DIV",{class:!0});var me=O(I);for(let oe=0;oe<w.length;oe+=1)w[oe].l(me);me.forEach(b),B=C(c),L=y(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(L)!=="svelte-1bc0bk9"&&(L.textContent=ae),c.forEach(b),g.forEach(b),this.h()},h:function(){S(o,T,52,3,1298),ge(f,"color",t[2]?"var(--text)":t[3].color),S(f,T,54,4,1347),P(v,"class","destination svelte-uq09i4"),S(v,T,56,4,1453),S(m,T,53,3,1339),S(G,T,61,3,1578),P(I,"class","scrollable-stats svelte-uq09i4"),S(I,T,62,3,1588),P(L,"class","button"),S(L,T,67,3,1711),P(n,"class","card svelte-uq09i4"),S(n,T,51,2,1276),P(e,"class","winner svelte-uq09i4"),S(e,T,50,1,1253)},m:function(_,g){ce(_,e,g),h(e,n),h(n,o),h(o,r),h(o,a),h(n,i),h(n,m),h(m,f),h(f,d),h(m,s),h(m,v),h(v,N),h(m,ee),h(n,z),h(n,G),h(n,Q),h(n,I);for(let c=0;c<w.length;c+=1)w[c]&&w[c].m(I,null);h(n,B),h(n,L),j=!0,U||(te=Se(L,"click",t[4],!1,!1,!1,!1),U=!0)},p:function(_,g){if((!j||g&4)&&l!==(l=_[2]?"Won! 🎉":"Lost")&&F(a,l),(!j||g&12)&&u!==(u=(_[2]?"You":_[3].who)+"")&&F(d,u),(!j||g&12)&&ge(f,"color",_[2]?"var(--text)":_[3].color),(!j||g&1)&&p!==(p=_[0].route[_[0].route.length-1].replaceAll("_"," ")+"")&&F(N,p),g&1){A=_e(_[0].players);let c;for(c=0;c<A.length;c+=1){const R=Je(_,A,c);w[c]?(w[c].p(R,g),W(w[c],1)):(w[c]=De(R),w[c].c(),W(w[c],1),w[c].m(I,null))}for(Ke(),c=A.length;c<w.length;c+=1)X(c);Ue()}},i:function(_){if(!j){for(let g=0;g<A.length;g+=1)W(w[g]);j=!0}},o:function(_){w=w.filter(Boolean);for(let g=0;g<w.length;g+=1)x(w[g]);j=!1},d:function(_){_&&b(e),_t(w,_),U=!1,te()}};return V("SvelteRegisterBlock",{block:ne,id:je.name,type:"if",source:"(45:0) {#if win || lose.who !== ''}",ctx:t}),ne}function De(t){let e,n;e=new it({props:{player:t[8]},$$inline:!0});const o={c:function(){Ne(e.$$.fragment)},l:function(l){Re(e.$$.fragment,l)},m:function(l,a){He(e,l,a),n=!0},p:function(l,a){const i={};a&1&&(i.player=l[8]),e.$set(i)},i:function(l){n||(W(e.$$.fragment,l),n=!0)},o:function(l){x(e.$$.fragment,l),n=!1},d:function(l){Ce(e,l)}};return V("SvelteRegisterBlock",{block:o,id:De.name,type:"each",source:"(59:4) {#each $game.players as player}",ctx:t}),o}function st(t){let e,n,o,r=(t[7]??"[error]: missing title")+"",l,a,i,m;i=new rt({props:{html:t[6]},$$inline:!0});const f={c:function(){e=k("section"),n=k("h1"),o=k("span"),l=D(r),a=H(),Ne(i.$$.fragment),this.h()},l:function(d){e=y(d,"SECTION",{class:!0});var s=O(e);n=y(s,"H1",{id:!0,class:!0});var v=O(n);o=y(v,"SPAN",{class:!0});var p=O(o);l=M(p,r),p.forEach(b),v.forEach(b),a=C(s),Re(i.$$.fragment,s),s.forEach(b),this.h()},h:function(){P(o,"class","mw-page-title-main"),S(o,T,75,3,1960),P(n,"id","firstHeading"),P(n,"class","firstHeading mw-first-heading"),S(n,T,74,2,1896),P(e,"class","svelte-uq09i4"),K(e,"end",t[2]||t[3].who!==""),S(e,T,73,1,1849)},m:function(d,s){ce(d,e,s),h(e,n),h(n,o),h(o,l),h(e,a),He(i,e,null),m=!0},p:function(d,s){(!m||s&128)&&r!==(r=(d[7]??"[error]: missing title")+"")&&F(l,r);const v={};s&64&&(v.html=d[6]),i.$set(v),(!m||s&12)&&K(e,"end",d[2]||d[3].who!=="")},i:function(d){m||(W(i.$$.fragment,d),m=!0)},o:function(d){x(i.$$.fragment,d),m=!1},d:function(d){d&&b(e),Ce(i)}};return V("SvelteRegisterBlock",{block:f,id:st.name,type:"slot",source:"(68:0) <GameShowWikiPage wiki={$location} let:html let:title>",ctx:t}),f}function Me(t){let e,n,o,r=(t[2]||t[3].who!=="")&&je(t);n=new at({props:{wiki:t[1],$$slots:{default:[st,({html:a,title:i})=>({6:a,7:i}),({html:a,title:i})=>(a?64:0)|(i?128:0)]},$$scope:{ctx:t}},$$inline:!0});const l={c:function(){r&&r.c(),e=H(),Ne(n.$$.fragment)},l:function(i){r&&r.l(i),e=C(i),Re(n.$$.fragment,i)},m:function(i,m){r&&r.m(i,m),ce(i,e,m),He(n,i,m),o=!0},p:function(i,[m]){i[2]||i[3].who!==""?r?(r.p(i,m),m&12&&W(r,1)):(r=je(i),r.c(),W(r,1),r.m(e.parentNode,e)):r&&(Ke(),x(r,1,1,()=>{r=null}),Ue());const f={};m&2&&(f.wiki=i[1]),m&2252&&(f.$$scope={dirty:m,ctx:i}),n.$set(f)},i:function(i){o||(W(r),W(n.$$.fragment,i),o=!0)},o:function(i){x(r),x(n.$$.fragment,i),o=!1},d:function(i){i&&b(e),r&&r.d(i),Ce(n,i)}};return V("SvelteRegisterBlock",{block:l,id:Me.name,type:"component",source:"",ctx:t}),l}function Bt(t,e,n){let o,r,l;ie(re,"me"),se(t,re,s=>n(5,o=s)),ie(J,"game"),se(t,J,s=>n(0,r=s)),ie(ke,"location"),se(t,ke,s=>n(1,l=s));let{$$slots:a={},$$scope:i}=e;be("Page",a,[]);let m=!1,f={who:"",color:""};Be(()=>{if(o.uid===null||o.uid===""||o.gameId===""||l===""){u();return}});const u=()=>{Le(J,r={id:"",state:"waiting",route:[],players:[]},r),Le(re,o={...o,gameId:""},o),Ve($)},d=[];return Object.keys(e).forEach(s=>{!~d.indexOf(s)&&s.slice(0,2)!=="$$"&&s!=="slot"&&console.warn(`<Page> was created with unknown prop '${s}'`)}),t.$capture_state=()=>({LinkParser:rt,onMount:Be,game:J,location:ke,me:re,goto:Ve,base:$,browser:kt,GameShowWikiPage:at,ScoreResults:it,win:m,lose:f,goHome:u,$me:o,$game:r,$location:l}),t.$inject_state=s=>{"win"in s&&n(2,m=s.win),"lose"in s&&n(3,f=s.lose)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&3&&(l===r.route[r.route.length-1]?n(2,m=!0):r.players.forEach(s=>{s.progress.linkHistory[s.progress.linkHistory.length-1].url===r.route[r.route.length-1]&&n(3,f={who:s.name,color:s.color})}))},[r,l,m,f,u]}class Yt extends ve{constructor(e){super(e),we(this,e,Bt,Me,pe,{}),V("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Me.name})}}export{Yt as component};
