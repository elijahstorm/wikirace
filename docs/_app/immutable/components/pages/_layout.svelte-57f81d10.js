import{S as K,i as O,s as B,k as w,l as I,m as S,h as g,n as _,G as V,b as E,H as z,I as tt,J,K as U,L,a as j,v as M,c as q,w as P,x as N,M as et,g as H,t as C,y as T,d as R,f as k,N as st,O as lt,P as nt,e as A,Q as D,R as at,T as it,U as ot,V as rt,W as ct,X as ft,Y as ut,Z as ht,_ as mt,o as _t,$ as dt,a0 as F,a1 as x}from"../../chunks/singletons-e95a346c.js";import{c as gt,f as pt,a as vt}from"../../chunks/index-b3a6f5a4.js";import{r as yt,t as bt}from"../../chunks/Toasts.svelte_svelte_type_style_lang-bcb21be1.js";import{p as kt,n as wt}from"../../chunks/stores-7f6bd896.js";import{m as Z,g as G}from"../../chunks/stores-9156ed11.js";import{g as It}from"../../chunks/navigation-89924277.js";import{s as Ct}from"../../chunks/firestore-75d3ea0e.js";function Lt(c){let t,e;return{c(){t=w("div"),this.h()},l(s){t=I(s,"DIV",{class:!0,style:!0}),S(t).forEach(g),this.h()},h(){_(t,"class",e=V(c[0])+" svelte-1qtja1k"),_(t,"style",c[1])},m(s,l){E(s,t,l)},p(s,[l]){l&1&&e!==(e=V(s[0])+" svelte-1qtja1k")&&_(t,"class",e)},i:z,o:z,d(s){s&&g(t)}}}function St(c,t,e){let{loadingStyle:s="circle"}=t,{size:l=3}=t,{left:i=0}=t,{top:n=0}=t,{right:o=0}=t,{bototm:r=0}=t,u=s=="dots"?"10px":`${l-.9}rem`;const h=`
		width: ${u};
		height: ${u};
		left: ${i}rem;
		top: ${n}rem;
		right: ${o}rem;
		bototm: ${r}rem;
	`;return c.$$set=f=>{"loadingStyle"in f&&e(0,s=f.loadingStyle),"size"in f&&e(2,l=f.size),"left"in f&&e(3,i=f.left),"top"in f&&e(4,n=f.top),"right"in f&&e(5,o=f.right),"bototm"in f&&e(6,r=f.bototm)},[s,h,l,i,n,o,r]}class Et extends K{constructor(t){super(),O(this,t,St,Lt,B,{loadingStyle:0,size:2,left:3,top:4,right:5,bototm:6})}}function Mt(c,{from:t,to:e},s={}){const l=getComputedStyle(c),i=l.transform==="none"?"":l.transform,[n,o]=l.transformOrigin.split(" ").map(parseFloat),r=t.left+t.width*n/e.width-(e.left+n),u=t.top+t.height*o/e.height-(e.top+o),{delay:h=0,duration:f=a=>Math.sqrt(a)*120,easing:m=gt}=s;return{delay:h,duration:tt(f)?f(Math.sqrt(r*r+u*u)):f,easing:m,css:(a,d)=>{const p=d*r,y=d*u,b=a+d*t.width/e.width,v=a+d*t.height/e.height;return`transform: ${i} translate(${p}px, ${y}px) scale(${b}, ${v});`}}}function Nt(c){let t,e,s,l,i;return{c(){t=J("svg"),e=J("path"),l=J("path"),this.h()},l(n){t=U(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=S(t);e=U(o,"path",{d:!0,fill:!0}),S(e).forEach(g),l=U(o,"path",{d:!0,fill:!0}),S(l).forEach(g),o.forEach(g),this.h()},h(){_(e,"d","M0.571429 0.571436C0.255838 0.887027 0.255838 1.3987 0.571429 1.71429L6.28571 7.42858C6.6013 7.74417 7.11298 7.74417 7.42857 7.42858C7.74416 7.11299 7.74416 6.60131 7.42857 6.28572L1.71429 0.571437C1.3987 0.255845 0.887021 0.255845 0.571429 0.571436Z"),_(e,"fill",s=`var(${c[0]}, var(--as-toast-color, black))`),_(l,"d","M7.42857 0.57141C7.11298 0.255819 6.60131 0.255819 6.28571 0.57141L0.571431 6.28569C0.25584 6.60128 0.255839 7.11296 0.57143 7.42855C0.887021 7.74414 1.3987 7.74414 1.71429 7.42855L7.42857 1.71427C7.74416 1.39868 7.74416 0.887002 7.42857 0.57141Z"),_(l,"fill",i=`var(${c[0]}, var(--as-toast-color, black))`),_(t,"width","8"),_(t,"height","8"),_(t,"viewBox","0 0 8 8"),_(t,"fill","none"),_(t,"xmlns","http://www.w3.org/2000/svg")},m(n,o){E(n,t,o),L(t,e),L(t,l)},p(n,[o]){o&1&&s!==(s=`var(${n[0]}, var(--as-toast-color, black))`)&&_(e,"fill",s),o&1&&i!==(i=`var(${n[0]}, var(--as-toast-color, black))`)&&_(l,"fill",i)},i:z,o:z,d(n){n&&g(t)}}}function Tt(c,t,e){let s,{type:l="info"}=t;return c.$$set=i=>{"type"in i&&e(1,l=i.type)},c.$$.update=()=>{c.$$.dirty&2&&e(0,s=`--as-toast-${l}-color`)},[s,l]}class Dt extends K{constructor(t){super(),O(this,t,Tt,Nt,B,{type:1})}}function jt(c){let t,e,s=c[0].msg+"",l,i,n,o,r,u,h,f,m;var a=c[1];function d(p){return{props:{type:p[0].type}}}return a&&(n=new a(d(c))),{c(){t=w("div"),e=w("span"),l=j(),i=w("button"),n&&M(n.$$.fragment),this.h()},l(p){t=I(p,"DIV",{class:!0});var y=S(t);e=I(y,"SPAN",{role:!0});var b=S(e);b.forEach(g),l=q(y),i=I(y,"BUTTON",{"aria-label":!0,class:!0});var v=S(i);n&&P(n.$$.fragment,v),v.forEach(g),y.forEach(g),this.h()},h(){_(e,"role","status"),_(i,"aria-label","Cancel Button"),_(i,"class","svelte-1ft637d"),_(t,"class",o=V(c[0].type)+" svelte-1ft637d")},m(p,y){E(p,t,y),L(t,e),e.innerHTML=s,L(t,l),L(t,i),n&&N(n,i,null),h=!0,f||(m=et(i,"click",c[2]),f=!0)},p(p,[y]){(!h||y&1)&&s!==(s=p[0].msg+"")&&(e.innerHTML=s);const b={};if(y&1&&(b.type=p[0].type),a!==(a=p[1])){if(n){H();const v=n;C(v.$$.fragment,1,0,()=>{T(v,1)}),R()}a?(n=new a(d(p)),M(n.$$.fragment),k(n.$$.fragment,1),N(n,i,null)):n=null}else a&&n.$set(b);(!h||y&1&&o!==(o=V(p[0].type)+" svelte-1ft637d"))&&_(t,"class",o)},i(p){h||(n&&k(n.$$.fragment,p),st(()=>{u&&u.end(1),r=lt(t,pt,{y:-600,duration:400}),r.start()}),h=!0)},o(p){n&&C(n.$$.fragment,p),r&&r.invalidate(),u=nt(t,vt,{}),h=!1},d(p){p&&g(t),n&&T(n),p&&u&&u.end(),f=!1,m()}}}function qt(c,t,e){let{toast:s}=t,{cancelIcon:l}=t;function i(){yt(s.id)}return c.$$set=n=>{"toast"in n&&e(0,s=n.toast),"cancelIcon"in n&&e(1,l=n.cancelIcon)},[s,l,i]}class zt extends K{constructor(t){super(),O(this,t,qt,jt,B,{toast:0,cancelIcon:1})}}function Q(c,t,e){const s=c.slice();return s[3]=t[e],s}function W(c){let t,e=[],s=new Map,l,i=c[2];const n=o=>o[3].id;for(let o=0;o<i.length;o+=1){let r=Q(c,i,o),u=n(r);s.set(u,e[o]=X(u,r))}return{c(){t=w("ul");for(let o=0;o<e.length;o+=1)e[o].c();this.h()},l(o){t=I(o,"UL",{class:!0});var r=S(t);for(let u=0;u<e.length;u+=1)e[u].l(r);r.forEach(g),this.h()},h(){_(t,"class","svelte-19uzrsi")},m(o,r){E(o,t,r);for(let u=0;u<e.length;u+=1)e[u].m(t,null);l=!0},p(o,r){if(r&7){i=o[2],H();for(let u=0;u<e.length;u+=1)e[u].r();e=at(e,r,n,1,o,i,s,t,it,X,null,Q);for(let u=0;u<e.length;u+=1)e[u].a();R()}},i(o){if(!l){for(let r=0;r<i.length;r+=1)k(e[r]);l=!0}},o(o){for(let r=0;r<e.length;r+=1)C(e[r]);l=!1},d(o){o&&g(t);for(let r=0;r<e.length;r+=1)e[r].d()}}}function X(c,t){let e,s,l,i,n=z,o;var r=t[0];function u(h){return{props:{toast:h[3],cancelIcon:h[1]}}}return r&&(s=new r(u(t))),{key:c,first:null,c(){e=w("li"),s&&M(s.$$.fragment),l=j(),this.h()},l(h){e=I(h,"LI",{});var f=S(e);s&&P(s.$$.fragment,f),l=q(f),f.forEach(g),this.h()},h(){this.first=e},m(h,f){E(h,e,f),s&&N(s,e,null),L(e,l),o=!0},p(h,f){t=h;const m={};if(f&4&&(m.toast=t[3]),f&2&&(m.cancelIcon=t[1]),r!==(r=t[0])){if(s){H();const a=s;C(a.$$.fragment,1,0,()=>{T(a,1)}),R()}r?(s=new r(u(t)),M(s.$$.fragment),k(s.$$.fragment,1),N(s,e,l)):s=null}else r&&s.$set(m)},r(){i=e.getBoundingClientRect()},f(){ot(e),n()},a(){n(),n=rt(e,i,Mt,{})},i(h){o||(s&&k(s.$$.fragment,h),o=!0)},o(h){s&&C(s.$$.fragment,h),o=!1},d(h){h&&g(e),s&&T(s)}}}function Kt(c){let t,e,s=c[2].length&&W(c);return{c(){s&&s.c(),t=A()},l(l){s&&s.l(l),t=A()},m(l,i){s&&s.m(l,i),E(l,t,i),e=!0},p(l,[i]){l[2].length?s?(s.p(l,i),i&4&&k(s,1)):(s=W(l),s.c(),k(s,1),s.m(t.parentNode,t)):s&&(H(),C(s,1,1,()=>{s=null}),R())},i(l){e||(k(s),e=!0)},o(l){C(s),e=!1},d(l){s&&s.d(l),l&&g(t)}}}function Ot(c,t,e){let s;D(c,bt,n=>e(2,s=n));let{toastComponent:l=zt}=t,{cancelIcon:i=Dt}=t;return c.$$set=n=>{"toastComponent"in n&&e(0,l=n.toastComponent),"cancelIcon"in n&&e(1,i=n.cancelIcon)},[l,i,s]}class Bt extends K{constructor(t){super(),O(this,t,Ot,Kt,B,{toastComponent:0,cancelIcon:1})}}function Y(c){let t,e,s,l;return s=new Et({}),{c(){t=w("div"),e=w("div"),M(s.$$.fragment),this.h()},l(i){t=I(i,"DIV",{class:!0});var n=S(t);e=I(n,"DIV",{class:!0});var o=S(e);P(s.$$.fragment,o),o.forEach(g),n.forEach(g),this.h()},h(){_(e,"class","loading-box svelte-o0n2j9"),_(t,"class","svelte-o0n2j9")},m(i,n){E(i,t,n),L(t,e),N(s,e,null),l=!0},i(i){l||(k(s.$$.fragment,i),l=!0)},o(i){C(s.$$.fragment,i),l=!1},d(i){i&&g(t),T(s)}}}function Ht(c){let t,e,s,l,i,n,o,r,u;const h=c[9].default,f=ct(h,c,c[8],null);let m=c[0]&&Y();return r=new Bt({}),{c(){t=w("link"),e=w("link"),s=w("link"),l=w("link"),i=j(),f&&f.c(),n=j(),m&&m.c(),o=j(),M(r.$$.fragment),this.h()},l(a){const d=ft('[data-svelte="svelte-1jb9iai"]',document.head);t=I(d,"LINK",{rel:!0,href:!0}),e=I(d,"LINK",{rel:!0,href:!0}),s=I(d,"LINK",{rel:!0,href:!0,crossorigin:!0}),l=I(d,"LINK",{href:!0,rel:!0}),d.forEach(g),i=q(a),f&&f.l(a),n=q(a),m&&m.l(a),o=q(a),P(r.$$.fragment,a),this.h()},h(){_(t,"rel","stylesheet"),_(t,"href",x+"/app.css"),_(e,"rel","preconnect"),_(e,"href","https://fonts.googleapis.com"),_(s,"rel","preconnect"),_(s,"href","https://fonts.gstatic.com"),_(s,"crossorigin",""),_(l,"href","https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;500;700;900&family=Roboto:ital,wght@0,100;0,300;0,500;0,700;0,900;1,500&display=swap"),_(l,"rel","stylesheet")},m(a,d){L(document.head,t),L(document.head,e),L(document.head,s),L(document.head,l),E(a,i,d),f&&f.m(a,d),E(a,n,d),m&&m.m(a,d),E(a,o,d),N(r,a,d),u=!0},p(a,[d]){f&&f.p&&(!u||d&256)&&ut(f,h,a,a[8],u?mt(h,a[8],d,null):ht(a[8]),null),a[0]?m?d&1&&k(m,1):(m=Y(),m.c(),k(m,1),m.m(o.parentNode,o)):m&&(H(),C(m,1,1,()=>{m=null}),R())},i(a){u||(k(f,a),k(m),k(r.$$.fragment,a),u=!0)},o(a){C(f,a),C(m),C(r.$$.fragment,a),u=!1},d(a){g(t),g(e),g(s),g(l),a&&g(i),f&&f.d(a),a&&g(n),m&&m.d(a),a&&g(o),T(r,a)}}}const $="wikiRaceMe";function Rt(c,t,e){let s,l,i,n;D(c,kt,a=>e(5,s=a)),D(c,Z,a=>e(6,l=a)),D(c,G,a=>e(7,i=a)),D(c,wt,a=>e(0,n=a));let{$$slots:o={},$$scope:r}=t,u,h=!1,f,m;return _t(()=>{e(2,h=!0)}),dt(()=>{u&&u()}),Z.subscribe(a=>e(3,f=a)),G.subscribe(a=>e(4,m=a)),c.$$set=a=>{"$$scope"in a&&e(8,r=a.$$scope)},c.$$.update=()=>{var a,d,p,y;if(c.$$.dirty&254&&h&&((!f.uid||f.uid==="")&&e(3,f=JSON.parse((a=localStorage.getItem($))!=null?a:"{}")),f.uid&&f.uid!==""&&(F(Z,l=f,l),localStorage.setItem($,JSON.stringify(l))),!u&&l.gameId&&l.gameId!==""&&e(1,u=Ct({type:"game",id:l.gameId},b=>{const v=b.data();!b.data()||F(G,i={...i,id:l.gameId,route:v.route,state:v.state,players:v.players},i)})),m.state==="started")){const b=(d=m.players.find(v=>l.uid===v.uid))==null?void 0:d.progress.linkHistory;if(b&&b.length!==0){const v=b[b.length-1].url;!((p=s.routeId)!=null&&p.includes(v))&&!((y=s.routeId)!=null&&y.includes("[wiki]"))&&It(`${x}/${v}`)}}},[n,u,h,f,m,s,l,i,r,o]}class Ft extends K{constructor(t){super(),O(this,t,Rt,Ht,B,{})}}export{Ft as default};
