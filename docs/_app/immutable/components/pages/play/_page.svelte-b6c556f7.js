import{S as ve,i as we,s as be,d as A,a0 as se,a1 as ie,v as ke,a as Be,ae as $,n as k,p as y,q as P,l as w,r as E,w as S,g as ce,T as _e,aw as ct,a8 as ut,aa as ft,ab as ht,ac as dt,k as Z,t as x,a2 as ge,a3 as He,x as j,c as R,y as q,f as T,u as pe,aq as X,X as d,Y as Pe,z,a4 as mt,au as _t,az as gt,A as Me,B as Le,C as Re,j as Ue,D as Te,o as We,h as Xe,as as pt,af as Ae}from"../../../chunks/singletons-f35c50ab.js";import{d as le,O as vt,_ as wt,m as re,g as J,p as Ie,l as Se}from"../../../chunks/firestore-90890b0b.js";import{n as Fe}from"../../../chunks/navigation-ae7331bd.js";import{g as Ve}from"../../../chunks/navigation-9fbd55b3.js";import{b as bt}from"../../../chunks/environment-60829b93.js";function kt(t,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const r in o)if(r!=="default"&&!(r in t)){const l=Object.getOwnPropertyDescriptor(o,r);l&&Object.defineProperty(t,r,l.get?l:{enumerable:!0,get:()=>o[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var N={},Ke={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Field=t.MonoidProduct=t.MonoidSum=t.SemigroupProduct=t.SemigroupSum=t.MagmaSub=t.Show=t.Bounded=t.Ord=t.Eq=t.isNumber=void 0;var e=function(n){return typeof n=="number"};t.isNumber=e,t.Eq={equals:function(n,o){return n===o}},t.Ord={equals:t.Eq.equals,compare:function(n,o){return n<o?-1:n>o?1:0}},t.Bounded={equals:t.Eq.equals,compare:t.Ord.compare,top:1/0,bottom:-1/0},t.Show={show:function(n){return JSON.stringify(n)}},t.MagmaSub={concat:function(n,o){return n-o}},t.SemigroupSum={concat:function(n,o){return n+o}},t.SemigroupProduct={concat:function(n,o){return n*o}},t.MonoidSum={concat:t.SemigroupSum.concat,empty:0},t.MonoidProduct={concat:t.SemigroupProduct.concat,empty:1},t.Field={add:t.SemigroupSum.concat,zero:0,mul:t.SemigroupProduct.concat,one:1,sub:t.MagmaSub.concat,degree:function(n){return 1},div:function(n,o){return n/o},mod:function(n,o){return n%o}}})(Ke);var yt=le&&le.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),St=le&&le.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Qe=le&&le.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&yt(e,t,n);return St(e,t),e};Object.defineProperty(N,"__esModule",{value:!0});var $e=N.now=rt=N.create=ot=N.Ord=nt=N.eqYear=tt=N.eqMonth=et=N.eqDate=xe=N.Eq=void 0,Pt=wt,Et=Qe(vt),Ot=Qe(Ke),xe=N.Eq={equals:function(t,e){return t.valueOf()===e.valueOf()}},et=N.eqDate={equals:function(t,e){return t.getDate()===e.getDate()}},tt=N.eqMonth={equals:function(t,e){return t.getMonth()===e.getMonth()}},nt=N.eqYear={equals:function(t,e){return t.getFullYear()===e.getFullYear()}},ot=N.Ord=(0,Pt.pipe)(Ot.Ord,Et.contramap(function(t){return t.valueOf()})),jt=function(){return new Date},rt=N.create=jt,qt=function(){return new Date().getTime()};$e=N.now=qt;const Nt=kt({__proto__:null,get now(){return $e},get create(){return rt},get Ord(){return ot},get eqYear(){return nt},get eqMonth(){return tt},get eqDate(){return et},get Eq(){return xe},default:N},[N]);const Dt="src/lib/Race/LinkParser.svelte";function Ee(t){let e;const n={c:function(){e=k("div"),this.h()},l:function(r){e=y(r,"DIV",{class:!0});var l=P(e);l.forEach(w),this.h()},h:function(){E(e,"class","container"),S(e,Dt,18,0,559)},m:function(r,l){ce(r,e,l),e.innerHTML=t[0],t[2](e)},p:function(r,[l]){l&1&&(e.innerHTML=r[0])},i:_e,o:_e,d:function(r){r&&w(e),t[2](null)}};return A("SvelteRegisterBlock",{block:n,id:Ee.name,type:"component",source:"",ctx:t}),n}function Yt(t,e,n){let o,r;se(re,"me"),ie(t,re,i=>n(3,o=i)),se(J,"game"),ie(t,J,i=>n(4,r=i));let{$$slots:l={},$$scope:a}=e;ke("LinkParser",l,[]);let{html:s}=e,h;Be(()=>h.querySelectorAll(`a[href*="${$}"]`).forEach(i=>i.onclick=f));const f=i=>{var Y;i.preventDefault(),i.stopPropagation();const v=(Y=i.target)==null?void 0:Y.href,p=v.substring(v.indexOf($)+$.length+1);Fe(r,o,p)};t.$$.on_mount.push(function(){s===void 0&&!("html"in e||t.$$.bound[t.$$.props.html])&&console.warn("<LinkParser> was created without expected prop 'html'")});const u=["html"];Object.keys(e).forEach(i=>{!~u.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<LinkParser> was created with unknown prop '${i}'`)});function _(i){ct[i?"unshift":"push"](()=>{h=i,n(1,h)})}return t.$$set=i=>{"html"in i&&n(0,s=i.html)},t.$capture_state=()=>({base:$,game:J,me:re,afterUpdate:Be,navigate:Fe,html:s,container:h,wikilink:f,$me:o,$game:r}),t.$inject_state=i=>{"html"in i&&n(0,s=i.html),"container"in i&&n(1,h=i.container)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[s,h,_]}class at extends ve{constructor(e){super(e),we(this,e,Yt,Ee,be,{html:0}),A("SvelteRegisterComponent",{component:this,tagName:"LinkParser",options:e,id:Ee.name})}get html(){throw new Error("<LinkParser>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set html(e){throw new Error("<LinkParser>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Mt=t=>({html:t&1,title:t&2}),Ce=t=>({html:t[0],title:t[1]});function Oe(t){let e;const n=t[4].default,o=ut(n,t,t[3],Ce),r={c:function(){o&&o.c()},l:function(a){o&&o.l(a)},m:function(a,s){o&&o.m(a,s),e=!0},p:function(a,[s]){o&&o.p&&(!e||s&11)&&ft(o,n,a,a[3],e?dt(n,a[3],s,Mt):ht(a[3]),Ce)},i:function(a){e||(Z(o,a),e=!0)},o:function(a){x(o,a),e=!1},d:function(a){o&&o.d(a)}};return A("SvelteRegisterBlock",{block:r,id:Oe.name,type:"component",source:"",ctx:t}),r}const Ge="https://en.wikipedia.org/w/api.php?origin=*&action=parse&format=json&page=",Ze="Error",ze="Error, no wikipedia page found";function Lt(t,e,n){let{$$slots:o={},$$scope:r}=e;ke("GameShowWikiPage",o,["default"]);let{wiki:l=""}=e,a="잠시만요~",s="Loading...";const h=["wiki"];return Object.keys(e).forEach(f=>{!~h.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<GameShowWikiPage> was created with unknown prop '${f}'`)}),t.$$set=f=>{"wiki"in f&&n(2,l=f.wiki),"$$scope"in f&&n(3,r=f.$$scope)},t.$capture_state=()=>({pipe:Ie,base:$,wikipedia:Ge,errorTitle:Ze,errorHTML:ze,wiki:l,html:a,title:s}),t.$inject_state=f=>{"wiki"in f&&n(2,l=f.wiki),"html"in f&&n(0,a=f.html),"title"in f&&n(1,s=f.title)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&4&&fetch(`${Ge}${l??"Main_page"}`).then(f=>f.json()).then(f=>{var _,i;let u=(_=Ie(f,JSON.stringify,JSON.parse))==null?void 0:_.parse;n(1,s=(u==null?void 0:u.title)??Ze),n(0,a=((i=u==null?void 0:u.text["*"])==null?void 0:i.replaceAll("/wiki/",`${$}/`))??ze)})},[a,s,l,r,o]}class st extends ve{constructor(e){super(e),we(this,e,Lt,Oe,be,{wiki:2}),A("SvelteRegisterComponent",{component:this,tagName:"GameShowWikiPage",options:e,id:Oe.name})}get wiki(){throw new Error("<GameShowWikiPage>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set wiki(e){throw new Error("<GameShowWikiPage>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const G="src/lib/Race/ScoreResults.svelte";function me(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}function je(t,e){let n,o=e[6]+"",r,l,a,s,h=e[4].url+"",f,u;const _={key:t,first:null,c:function(){n=k("div"),r=j(o),l=j(`:
				`),a=k("span"),s=j("/"),f=j(h),u=R(),this.h()},l:function(v){n=y(v,"DIV",{});var p=P(n);r=q(p,o),l=q(p,`:
				`),a=y(p,"SPAN",{class:!0});var Y=P(a);s=q(Y,"/"),f=q(Y,h),Y.forEach(w),u=T(p),p.forEach(w),this.h()},h:function(){E(a,"class","s-gTYNWbY3cL2r"),X(a,"link",!0),X(a,"back",e[4].type==="back"),X(a,"destination",e[2].route.includes(e[4].url)),S(a,G,20,4,520),S(n,G,18,3,497),this.first=n},m:function(v,p){ce(v,n,p),d(n,r),d(n,l),d(n,a),d(a,s),d(a,f),d(n,u)},p:function(v,p){e=v,p&1&&o!==(o=e[6]+"")&&z(r,o),p&1&&h!==(h=e[4].url+"")&&z(f,h),p&1&&X(a,"back",e[4].type==="back"),p&5&&X(a,"destination",e[2].route.includes(e[4].url))},d:function(v){v&&w(n)}};return A("SvelteRegisterBlock",{block:_,id:je.name,type:"each",source:"(18:2) {#each player.progress.linkHistory as link, index (link)}",ctx:e}),_}function qe(t){let e,n,o=t[0].name+"",r,l,a,s=t[1]?"Hide":"View History",h,f,u,_=[],i=new Map,v,p,Y,ee,I,V=t[0].progress.linksProgressed+"",K,B,F,H,te,D,U=t[0].progress.backNavs+"",ne,M,b,C=t[0].progress.linkHistory;ge(C);const oe=g=>g[4];He(t,C,me,oe);for(let g=0;g<C.length;g+=1){let m=me(t,C,g),c=oe(m);i.set(c,_[g]=je(c,m))}const O={c:function(){e=k("section"),n=k("p"),r=j(o),l=R(),a=k("button"),h=j(s),f=R(),u=k("div");for(let m=0;m<_.length;m+=1)_[m].c();v=R(),p=k("div"),Y=j("Links Clicked"),ee=R(),I=k("div"),K=j(V),B=R(),F=k("div"),H=j("Times Pressed Back"),te=R(),D=k("div"),ne=j(U),this.h()},l:function(m){e=y(m,"SECTION",{class:!0});var c=P(e);n=y(c,"P",{class:!0,style:!0});var L=P(n);r=q(L,o),L.forEach(w),l=T(c),a=y(c,"BUTTON",{class:!0});var Q=P(a);h=q(Q,s),Q.forEach(w),f=T(c),u=y(c,"DIV",{class:!0});var ue=P(u);for(let ye=0;ye<_.length;ye+=1)_[ye].l(ue);ue.forEach(w),v=T(c),p=y(c,"DIV",{class:!0});var fe=P(p);Y=q(fe,"Links Clicked"),fe.forEach(w),ee=T(c),I=y(c,"DIV",{class:!0});var he=P(I);K=q(he,V),he.forEach(w),B=T(c),F=y(c,"DIV",{class:!0});var de=P(F);H=q(de,"Times Pressed Back"),de.forEach(w),te=T(c),D=y(c,"DIV",{class:!0});var ae=P(D);ne=q(ae,U),ae.forEach(w),c.forEach(w),this.h()},h:function(){E(n,"class","name s-gTYNWbY3cL2r"),pe(n,"color",t[0].color??"var(--text)"),S(n,G,10,1,194),E(a,"class","button"),S(a,G,13,1,282),E(u,"class","history s-gTYNWbY3cL2r"),X(u,"show",t[1]),S(u,G,16,1,401),E(p,"class","stat-name s-gTYNWbY3cL2r"),S(p,G,30,1,708),E(I,"class","stat s-gTYNWbY3cL2r"),S(I,G,31,1,752),E(F,"class","stat-name s-gTYNWbY3cL2r"),S(F,G,34,1,816),E(D,"class","stat s-gTYNWbY3cL2r"),S(D,G,35,1,865),E(e,"class","s-gTYNWbY3cL2r"),S(e,G,9,0,183)},m:function(m,c){ce(m,e,c),d(e,n),d(n,r),d(e,l),d(e,a),d(a,h),d(e,f),d(e,u);for(let L=0;L<_.length;L+=1)_[L].m(u,null);d(e,v),d(e,p),d(p,Y),d(e,ee),d(e,I),d(I,K),d(e,B),d(e,F),d(F,H),d(e,te),d(e,D),d(D,ne),M||(b=[Pe(a,"click",t[3],!1,!1,!1),Pe(a,"keydown",t[3],!1,!1,!1)],M=!0)},p:function(m,[c]){c&1&&o!==(o=m[0].name+"")&&z(r,o),c&1&&pe(n,"color",m[0].color??"var(--text)"),c&2&&s!==(s=m[1]?"Hide":"View History")&&z(h,s),c&5&&(C=m[0].progress.linkHistory,ge(C),He(m,C,me,oe),_=mt(_,c,oe,1,m,C,i,u,_t,je,null,me)),c&2&&X(u,"show",m[1]),c&1&&V!==(V=m[0].progress.linksProgressed+"")&&z(K,V),c&1&&U!==(U=m[0].progress.backNavs+"")&&z(ne,U)},i:_e,o:_e,d:function(m){m&&w(e);for(let c=0;c<_.length;c+=1)_[c].d();M=!1,gt(b)}};return A("SvelteRegisterBlock",{block:O,id:qe.name,type:"component",source:"",ctx:t}),O}function Rt(t,e,n){let o;se(J,"game"),ie(t,J,u=>n(2,o=u));let{$$slots:r={},$$scope:l}=e;ke("ScoreResults",r,[]);let{player:a}=e,s=!1;const h=()=>{n(1,s=!s)};t.$$.on_mount.push(function(){a===void 0&&!("player"in e||t.$$.bound[t.$$.props.player])&&console.warn("<ScoreResults> was created without expected prop 'player'")});const f=["player"];return Object.keys(e).forEach(u=>{!~f.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<ScoreResults> was created with unknown prop '${u}'`)}),t.$$set=u=>{"player"in u&&n(0,a=u.player)},t.$capture_state=()=>({D:Nt,game:J,player:a,show:s,viewHistory:h,$game:o}),t.$inject_state=u=>{"player"in u&&n(0,a=u.player),"show"in u&&n(1,s=u.show)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[a,s,o,h]}class it extends ve{constructor(e){super(e),we(this,e,Rt,qe,be,{player:0}),A("SvelteRegisterComponent",{component:this,tagName:"ScoreResults",options:e,id:qe.name})}get player(){throw new Error("<ScoreResults>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set player(e){throw new Error("<ScoreResults>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const W="src/routes/play/+page.svelte";function Je(t,e,n){const o=t.slice();return o[8]=e[n],o}function Ne(t){let e,n,o,r,l=t[2]?"Won! 🎉":"Lost",a,s,h,f,u=(t[2]?"You":t[3].who)+"",_,i,v,p=t[0].route[t[0].route.length-1].replaceAll("_"," ")+"",Y,ee,I,V,K,B,F,H,te,D,U,ne,M=t[0].players;ge(M);let b=[];for(let O=0;O<M.length;O+=1)b[O]=De(Je(t,M,O));const C=O=>x(b[O],1,1,()=>{b[O]=null}),oe={c:function(){e=k("div"),n=k("div"),o=k("p"),r=j("You "),a=j(l),s=R(),h=k("p"),f=k("span"),_=j(u),i=j(`
				got to
				`),v=k("span"),Y=j(p),ee=j(`
				first!`),I=R(),V=k("hr"),K=R(),B=k("div");for(let g=0;g<b.length;g+=1)b[g].c();F=R(),H=k("button"),te=j("Go home"),this.h()},l:function(g){e=y(g,"DIV",{class:!0});var m=P(e);n=y(m,"DIV",{class:!0});var c=P(n);o=y(c,"P",{});var L=P(o);r=q(L,"You "),a=q(L,l),L.forEach(w),s=T(c),h=y(c,"P",{});var Q=P(h);f=y(Q,"SPAN",{style:!0});var ue=P(f);_=q(ue,u),ue.forEach(w),i=q(Q,`
				got to
				`),v=y(Q,"SPAN",{class:!0});var fe=P(v);Y=q(fe,p),fe.forEach(w),ee=q(Q,`
				first!`),Q.forEach(w),I=T(c),V=y(c,"HR",{}),K=T(c),B=y(c,"DIV",{class:!0});var he=P(B);for(let ae=0;ae<b.length;ae+=1)b[ae].l(he);he.forEach(w),F=T(c),H=y(c,"BUTTON",{class:!0});var de=P(H);te=q(de,"Go home"),de.forEach(w),c.forEach(w),m.forEach(w),this.h()},h:function(){S(o,W,47,3,1298),pe(f,"color",t[2]?"var(--text)":t[3].color),S(f,W,49,4,1347),E(v,"class","destination s-eE8ZkFhlAFpO"),S(v,W,51,4,1453),S(h,W,48,3,1339),S(V,W,56,3,1578),E(B,"class","scrollable-stats s-eE8ZkFhlAFpO"),S(B,W,57,3,1588),E(H,"class","button"),S(H,W,62,3,1711),E(n,"class","card s-eE8ZkFhlAFpO"),S(n,W,46,2,1276),E(e,"class","winner s-eE8ZkFhlAFpO"),S(e,W,45,1,1253)},m:function(g,m){ce(g,e,m),d(e,n),d(n,o),d(o,r),d(o,a),d(n,s),d(n,h),d(h,f),d(f,_),d(h,i),d(h,v),d(v,Y),d(h,ee),d(n,I),d(n,V),d(n,K),d(n,B);for(let c=0;c<b.length;c+=1)b[c].m(B,null);d(n,F),d(n,H),d(H,te),D=!0,U||(ne=Pe(H,"click",t[4],!1,!1,!1),U=!0)},p:function(g,m){if((!D||m&4)&&l!==(l=g[2]?"Won! 🎉":"Lost")&&z(a,l),(!D||m&12)&&u!==(u=(g[2]?"You":g[3].who)+"")&&z(_,u),(!D||m&12)&&pe(f,"color",g[2]?"var(--text)":g[3].color),(!D||m&1)&&p!==(p=g[0].route[g[0].route.length-1].replaceAll("_"," ")+"")&&z(Y,p),m&1){M=g[0].players,ge(M);let c;for(c=0;c<M.length;c+=1){const L=Je(g,M,c);b[c]?(b[c].p(L,m),Z(b[c],1)):(b[c]=De(L),b[c].c(),Z(b[c],1),b[c].m(B,null))}for(Xe(),c=M.length;c<b.length;c+=1)C(c);Ue()}},i:function(g){if(!D){for(let m=0;m<M.length;m+=1)Z(b[m]);D=!0}},o:function(g){b=b.filter(Boolean);for(let m=0;m<b.length;m+=1)x(b[m]);D=!1},d:function(g){g&&w(e),pt(b,g),U=!1,ne()}};return A("SvelteRegisterBlock",{block:oe,id:Ne.name,type:"if",source:"(45:0) {#if win || lose.who !== ''}",ctx:t}),oe}function De(t){let e,n;e=new it({props:{player:t[8]},$$inline:!0});const o={c:function(){Me(e.$$.fragment)},l:function(l){Le(e.$$.fragment,l)},m:function(l,a){Re(e,l,a),n=!0},p:function(l,a){const s={};a&1&&(s.player=l[8]),e.$set(s)},i:function(l){n||(Z(e.$$.fragment,l),n=!0)},o:function(l){x(e.$$.fragment,l),n=!1},d:function(l){Te(e,l)}};return A("SvelteRegisterBlock",{block:o,id:De.name,type:"each",source:"(59:4) {#each $game.players as player}",ctx:t}),o}function lt(t){let e,n,o,r=(t[7]??"[error]: missing title")+"",l,a,s,h;s=new at({props:{html:t[6]},$$inline:!0});const f={c:function(){e=k("section"),n=k("h1"),o=k("span"),l=j(r),a=R(),Me(s.$$.fragment),this.h()},l:function(_){e=y(_,"SECTION",{class:!0});var i=P(e);n=y(i,"H1",{id:!0,class:!0});var v=P(n);o=y(v,"SPAN",{class:!0});var p=P(o);l=q(p,r),p.forEach(w),v.forEach(w),a=T(i),Le(s.$$.fragment,i),i.forEach(w),this.h()},h:function(){E(o,"class","mw-page-title-main"),S(o,W,70,3,1960),E(n,"id","firstHeading"),E(n,"class","firstHeading mw-first-heading"),S(n,W,69,2,1896),E(e,"class","s-eE8ZkFhlAFpO"),X(e,"end",t[2]||t[3].who!==""),S(e,W,68,1,1849)},m:function(_,i){ce(_,e,i),d(e,n),d(n,o),d(o,l),d(e,a),Re(s,e,null),h=!0},p:function(_,i){(!h||i&128)&&r!==(r=(_[7]??"[error]: missing title")+"")&&z(l,r);const v={};i&64&&(v.html=_[6]),s.$set(v),(!h||i&12)&&X(e,"end",_[2]||_[3].who!=="")},i:function(_){h||(Z(s.$$.fragment,_),h=!0)},o:function(_){x(s.$$.fragment,_),h=!1},d:function(_){_&&w(e),Te(s)}};return A("SvelteRegisterBlock",{block:f,id:lt.name,type:"slot",source:"(68:0) <GameShowWikiPage wiki={$location} let:html let:title>",ctx:t}),f}function Ye(t){let e,n,o,r=(t[2]||t[3].who!=="")&&Ne(t);n=new st({props:{wiki:t[1],$$slots:{default:[lt,({html:a,title:s})=>({6:a,7:s}),({html:a,title:s})=>(a?64:0)|(s?128:0)]},$$scope:{ctx:t}},$$inline:!0});const l={c:function(){r&&r.c(),e=R(),Me(n.$$.fragment)},l:function(s){r&&r.l(s),e=T(s),Le(n.$$.fragment,s)},m:function(s,h){r&&r.m(s,h),ce(s,e,h),Re(n,s,h),o=!0},p:function(s,[h]){s[2]||s[3].who!==""?r?(r.p(s,h),h&12&&Z(r,1)):(r=Ne(s),r.c(),Z(r,1),r.m(e.parentNode,e)):r&&(Xe(),x(r,1,1,()=>{r=null}),Ue());const f={};h&2&&(f.wiki=s[1]),h&2252&&(f.$$scope={dirty:h,ctx:s}),n.$set(f)},i:function(s){o||(Z(r),Z(n.$$.fragment,s),o=!0)},o:function(s){x(r),x(n.$$.fragment,s),o=!1},d:function(s){r&&r.d(s),s&&w(e),Te(n,s)}};return A("SvelteRegisterBlock",{block:l,id:Ye.name,type:"component",source:"",ctx:t}),l}function Tt(t,e,n){let o,r,l;se(re,"me"),ie(t,re,i=>n(5,o=i)),se(J,"game"),ie(t,J,i=>n(0,r=i)),se(Se,"location"),ie(t,Se,i=>n(1,l=i));let{$$slots:a={},$$scope:s}=e;ke("Page",a,[]);let h=!1,f={who:"",color:""};We(()=>{if(o.uid===null||o.uid===""||o.gameId===""||l===""){u();return}});const u=()=>{Ae(J,r={id:"",state:"waiting",route:[],players:[]},r),Ae(re,o={...o,gameId:""},o),Ve($)},_=[];return Object.keys(e).forEach(i=>{!~_.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&console.warn(`<Page> was created with unknown prop '${i}'`)}),t.$capture_state=()=>({LinkParser:at,onMount:We,game:J,location:Se,me:re,goto:Ve,base:$,browser:bt,GameShowWikiPage:st,ScoreResults:it,win:h,lose:f,goHome:u,$me:o,$game:r,$location:l}),t.$inject_state=i=>{"win"in i&&n(2,h=i.win),"lose"in i&&n(3,f=i.lose)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),t.$$.update=()=>{t.$$.dirty&3&&(l===r.route[r.route.length-1]?n(2,h=!0):r.players.forEach(i=>{i.progress.linkHistory[i.progress.linkHistory.length-1].url===r.route[r.route.length-1]&&n(3,f={who:i.name,color:i.color})}))},[r,l,h,f,u]}class Ft extends ve{constructor(e){super(e),we(this,e,Tt,Ye,be,{}),A("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Ye.name})}}export{Ft as default};
