import{S as b,i as v,s as H,k as w,l as y,m as $,h as g,n as _,b as T,H as S,Q as h,j as I,a1 as d,ag as J,W as V,Y as W,Z as G,_ as Q,f as E,t as P,v as q,w as A,x as N,y as O,o as U,q as Y,a as Z,r as z,c as B,L as k,u as F}from"../../../chunks/singletons-408ea53d.js";import{l as j,m as D,g as C}from"../../../chunks/stores-54d9c0f2.js";import{b as L,p as K}from"../../../chunks/firestore-ca500ac4.js";import{d as R}from"../../../chunks/defaults-a8fffd7c.js";import{g as X}from"../../../chunks/navigation-5395a815.js";const x=(a,t,n)=>{var o;const s=a.players.find(u=>t.uid===u.uid);if(!s)return;L({type:"game",id:a.id},"players",s,!0);const r=(o=s.progress)!=null?o:R;r.linksProgressed++,r.linkHistory.push({url:n,type:"url",index:r.linkHistory.length}),L({type:"game",id:a.id},"players",{...s,progress:r}),j.set(n)};function ee(a){let t;return{c(){t=w("div"),this.h()},l(n){t=y(n,"DIV",{class:!0});var e=$(t);e.forEach(g),this.h()},h(){_(t,"class","container")},m(n,e){T(n,t,e),t.innerHTML=a[0],a[2](t)},p(n,[e]){e&1&&(t.innerHTML=n[0])},i:S,o:S,d(n){n&&g(t),a[2](null)}}}function te(a,t,n){let e,s;h(a,D,i=>n(3,e=i)),h(a,C,i=>n(4,s=i));let{html:r}=t,o;I(()=>o.querySelectorAll(`a[href*="${d}"]`).forEach(i=>i.onclick=u));const u=i=>{var p;i.preventDefault(),i.stopPropagation();const l=(p=i.target)==null?void 0:p.href,f=l.substring(l.indexOf(d)+d.length+1);x(s,e,f)};function c(i){J[i?"unshift":"push"](()=>{o=i,n(1,o)})}return a.$$set=i=>{"html"in i&&n(0,r=i.html)},[r,o,c]}class se extends b{constructor(t){super(),v(this,t,te,ee,H,{html:0})}}const ne=a=>({html:a&1,title:a&2}),M=a=>({html:a[0],title:a[1]});function ae(a){let t;const n=a[4].default,e=V(n,a,a[3],M);return{c(){e&&e.c()},l(s){e&&e.l(s)},m(s,r){e&&e.m(s,r),t=!0},p(s,[r]){e&&e.p&&(!t||r&11)&&W(e,n,s,s[3],t?Q(n,s[3],r,ne):G(s[3]),M)},i(s){t||(E(e,s),t=!0)},o(s){P(e,s),t=!1},d(s){e&&e.d(s)}}}const re="https://en.wikipedia.org/w/api.php?origin=*&action=parse&format=json&page=",ie="Error",oe="Error, no wikipedia page found";function le(a,t,n){let{$$slots:e={},$$scope:s}=t,{wiki:r=""}=t,o="\uC7A0\uC2DC\uB9CC\uC694~",u="Loading...";return a.$$set=c=>{"wiki"in c&&n(2,r=c.wiki),"$$scope"in c&&n(3,s=c.$$scope)},a.$$.update=()=>{a.$$.dirty&4&&fetch(`${re}${r!=null?r:"Main_page"}`).then(c=>c.json()).then(c=>{var l,f,p,m;let i=(l=K(c,JSON.stringify,JSON.parse))==null?void 0:l.parse;n(1,u=(f=i==null?void 0:i.title)!=null?f:ie),n(0,o=(m=(p=i==null?void 0:i.text["*"])==null?void 0:p.replaceAll("/wiki/",`${d}/`))!=null?m:oe)})},[o,u,r,s,e]}class ce extends b{constructor(t){super(),v(this,t,le,ae,H,{wiki:2})}}function ue(a){var i;let t,n,e,s=((i=a[4])!=null?i:"[error]: missing title")+"",r,o,u,c;return u=new se({props:{html:a[3]}}),{c(){t=w("section"),n=w("h1"),e=w("span"),r=Y(s),o=Z(),q(u.$$.fragment),this.h()},l(l){t=y(l,"SECTION",{class:!0});var f=$(t);n=y(f,"H1",{id:!0,class:!0});var p=$(n);e=y(p,"SPAN",{class:!0});var m=$(e);r=z(m,s),m.forEach(g),p.forEach(g),o=B(f),A(u.$$.fragment,f),f.forEach(g),this.h()},h(){_(e,"class","mw-page-title-main"),_(n,"id","firstHeading"),_(n,"class","firstHeading mw-first-heading"),_(t,"class","svelte-1rqesli")},m(l,f){T(l,t,f),k(t,n),k(n,e),k(e,r),k(t,o),N(u,t,null),c=!0},p(l,f){var m;(!c||f&16)&&s!==(s=((m=l[4])!=null?m:"[error]: missing title")+"")&&F(r,s);const p={};f&8&&(p.html=l[3]),u.$set(p)},i(l){c||(E(u.$$.fragment,l),c=!0)},o(l){P(u.$$.fragment,l),c=!1},d(l){l&&g(t),O(u)}}}function fe(a){let t,n;return t=new ce({props:{wiki:a[0],$$slots:{default:[ue,({html:e,title:s})=>({3:e,4:s}),({html:e,title:s})=>(e?8:0)|(s?16:0)]},$$scope:{ctx:a}}}),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,s){N(t,e,s),n=!0},p(e,[s]){const r={};s&1&&(r.wiki=e[0]),s&56&&(r.$$scope={dirty:s,ctx:e}),t.$set(r)},i(e){n||(E(t.$$.fragment,e),n=!0)},o(e){P(t.$$.fragment,e),n=!1},d(e){O(t,e)}}}function pe(a,t,n){let e,s,r;return h(a,D,o=>n(2,e=o)),h(a,C,o=>n(1,s=o)),h(a,j,o=>n(0,r=o)),U(()=>{if(e.uid===null){X(d);return}}),a.$$.update=()=>{a.$$.dirty&3&&s.route[s.route.length-1]},[r,s]}class ke extends b{constructor(t){super(),v(this,t,pe,fe,H,{})}}export{ke as default};
