import{a1 as f,S as E,i as w,s as L,k,l as b,m as v,h,n as d,b as S,H,Q as _,j as D,ag as M,q as T,a as C,v as I,r as N,c as O,w as V,L as y,x as j,u as Q,f as U,t as z,y as B,o as F}from"../../../chunks/singletons-e95a346c.js";import{m as q,g as x}from"../../../chunks/stores-9156ed11.js";import{g as A}from"../../../chunks/navigation-89924277.js";import{b as P}from"../../../chunks/firestore-75d3ea0e.js";import{d as G}from"../../../chunks/defaults-a8fffd7c.js";import{p as J}from"../../../chunks/stores-7f6bd896.js";const K=(r,e,t)=>{var n;const i=r.players.find(o=>e.uid===o.uid);if(!i)return;P({type:"game",id:r.id},"players",i,!0);const l=(n=i.progress)!=null?n:G;l.linksProgressed++,l.linkHistory.push({url:t,type:"url",index:l.linkHistory.length}),P({type:"game",id:r.id},"players",{...i,progress:l}),t&&A(`${f}/${t}`)};function R(r){let e;return{c(){e=k("div"),this.h()},l(t){e=b(t,"DIV",{class:!0});var a=v(e);a.forEach(h),this.h()},h(){d(e,"class","container")},m(t,a){S(t,e,a),e.innerHTML=r[0],r[2](e)},p(t,[a]){a&1&&(e.innerHTML=t[0])},i:H,o:H,d(t){t&&h(e),r[2](null)}}}function W(r,e,t){let a,i;_(r,q,s=>t(3,a=s)),_(r,x,s=>t(4,i=s));let{html:l}=e,n;D(()=>n.querySelectorAll(`a[href*="${f}"]`).forEach(s=>s.onclick=o));const o=s=>{var p;s.preventDefault(),s.stopPropagation();const c=(p=s.target)==null?void 0:p.href,u=c.substring(c.indexOf(f)+f.length+1);K(i,a,u)};function m(s){M[s?"unshift":"push"](()=>{n=s,t(1,n)})}return r.$$set=s=>{"html"in s&&t(0,l=s.html)},[l,n,m]}class X extends E{constructor(e){super(),w(this,e,W,R,L,{html:0})}}function Y(r){var s;let e,t,a,i=((s=r[1])!=null?s:"[error]: missing title")+"",l,n,o,m;return o=new X({props:{html:r[0]}}),{c(){e=k("section"),t=k("h1"),a=k("span"),l=T(i),n=C(),I(o.$$.fragment),this.h()},l(c){e=b(c,"SECTION",{class:!0});var u=v(e);t=b(u,"H1",{id:!0,class:!0});var p=v(t);a=b(p,"SPAN",{class:!0});var g=v(a);l=N(g,i),g.forEach(h),p.forEach(h),n=O(u),V(o.$$.fragment,u),u.forEach(h),this.h()},h(){d(a,"class","mw-page-title-main"),d(t,"id","firstHeading"),d(t,"class","firstHeading mw-first-heading"),d(e,"class","svelte-1rqesli")},m(c,u){S(c,e,u),y(e,t),y(t,a),y(a,l),y(e,n),j(o,e,null),m=!0},p(c,[u]){var g;(!m||u&2)&&i!==(i=((g=c[1])!=null?g:"[error]: missing title")+"")&&Q(l,i);const p={};u&1&&(p.html=c[0]),o.$set(p)},i(c){m||(U(o.$$.fragment,c),m=!0)},o(c){z(o.$$.fragment,c),m=!1},d(c){c&&h(e),B(o)}}}function Z(r,e,t){let a,i,l;_(r,x,s=>t(3,a=s)),_(r,J,s=>t(4,i=s)),_(r,q,s=>t(5,l=s));let{data:n}=e,{html:o,title:m}=n;return F(()=>{if(l.uid==null){A(f);return}i.url.pathname.substring(f.length+1).replaceAll("/",""),a.route[a.route.length-1]}),r.$$set=s=>{"data"in s&&t(2,n=s.data)},r.$$.update=()=>{r.$$.dirty&4&&t(0,{html:o,title:m}=n,o,(t(1,m),t(2,n)))},[o,m,n]}class nt extends E{constructor(e){super(),w(this,e,Z,Y,L,{data:2})}}export{nt as default};
